
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="561px" preserveAspectRatio="none" style="width:1110px;height:561px;" version="1.1" viewBox="0 0 1110 561" width="1110px" zoomAndPan="magnify"><defs><filter height="300%" id="ft2zgwowbhtmn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="430.8701" cy="16" fill="#000000" filter="url(#ft2zgwowbhtmn)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><g id="prebooked"><rect fill="#FEFECE" filter="url(#ft2zgwowbhtmn)" height="50" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="100" x="380.8701" y="103"/><line style="stroke:#A80036;stroke-width:1.5;" x1="380.8701" x2="480.8701" y1="129.2969" y2="129.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="390.8701" y="120.9951">prebooked</text></g><g id="confirmed"><rect fill="#FEFECE" filter="url(#ft2zgwowbhtmn)" height="50" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="94" x="383.8701" y="245"/><line style="stroke:#A80036;stroke-width:1.5;" x1="383.8701" x2="477.8701" y1="271.2969" y2="271.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="393.8701" y="262.9951">confirmed</text></g><ellipse cx="318.8701" cy="539" fill="none" filter="url(#ft2zgwowbhtmn)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="319.3701" cy="539.5" fill="#000000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><g id="error"><rect fill="#FEFECE" filter="url(#ft2zgwowbhtmn)" height="50" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="56" x="193.8701" y="387"/><line style="stroke:#A80036;stroke-width:1.5;" x1="193.8701" x2="249.8701" y1="413.2969" y2="413.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="203.8701" y="404.9951">error</text></g><g id="fulfilled"><rect fill="#FEFECE" filter="url(#ft2zgwowbhtmn)" height="50" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="74" x="453.8701" y="387"/><line style="stroke:#A80036;stroke-width:1.5;" x1="453.8701" x2="527.8701" y1="413.2969" y2="413.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="463.8701" y="404.9951">fulfilled</text></g><!--MD5=[0d41cb91972f753efa07e36ffb227bf7]
link *start to prebooked--><path d="M430.8701,26.002 C430.8701,41.458 430.8701,73.685 430.8701,97.6 " fill="none" id="*start-to-prebooked" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="430.8701,102.873,434.8701,93.873,430.8701,97.873,426.8701,93.873,430.8701,102.873" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="427" x="431.8701" y="69.0669">POST /Bookings with OfferIds, Optional AccoIds, Optional ancillaries</text><!--MD5=[4f6bdfb1533e6d9d808589b5af9028c7]
link prebooked to confirmed--><path d="M430.8701,153.067 C430.8701,177.007 430.8701,213.78 430.8701,239.473 " fill="none" id="prebooked-to-confirmed" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="430.8701,244.779,434.8701,235.779,430.8701,239.779,426.8701,235.779,430.8701,244.779" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="464.8701" y="196.0669">POST /Bookings/id/fulfillments</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="435.8701" y="211.1997">where at least 1 fulfillment is confirmed</text><!--MD5=[cde281613d0b073a6b9a5c9d0b74ef14]
link prebooked to *end--><path d="M380.8371,135.608 C291.7551,150.528 109.4147,196.209 49.87,325 C6,419.888 121.5181,454.5042 195.8701,499 C231.4331,520.2828 279.8341,531.1728 303.9441,535.5759 " fill="none" id="prebooked-to-*end" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="308.9811,536.4654,300.8144,530.9604,304.0574,535.5954,299.4224,538.8384,308.9811,536.4654" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="50.87" y="345.5669">DELETE /Bookings/id</text><!--MD5=[cde281613d0b073a6b9a5c9d0b74ef14]
link prebooked to *end--><path d="M481.2191,131.809 C603.5301,139.814 910.6221,167.399 969.8701,245 C983.3551,262.663 981.7981,276.25 969.8701,295 C821.6041,528.0644 417.7671,538.6106 334.1491,538.2397 " fill="none" id="prebooked-to-*end-1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="329.1101,538.2017,338.0801,542.2684,334.11,538.2388,338.1396,534.2687,329.1101,538.2017" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="945.8701" y="345.5669">ticket-time-limit reached</text><!--MD5=[7e5f2e0e0de630f102e3d00adcfff96f]
link prebooked to error--><path d="M380.5811,138.117 C325.0881,151.156 238.4071,181.028 198.8701,245 C172.7401,287.28 191.7251,347.052 207.2501,382.143 " fill="none" id="prebooked-to-error" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="209.3161,386.717,209.2564,376.8683,207.2577,382.1603,201.9657,380.1617,209.3161,386.717" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="217.3701" y="267.0669">unrecoverable error</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="199.8701" y="282.1997">at confirmation/fulfillment</text><!--MD5=[bdb020530c54befa3afbb492ec957f51]
link prebooked to fulfilled--><path d="M481.0271,131.704 C551.0891,136.65 672.7411,149.883 699.8701,183 C724.9341,213.595 798.9931,226.544 694.8701,357 C674.8891,382.035 587.0271,398.063 533.3391,405.709 " fill="none" id="prebooked-to-fulfilled" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="528.2531,406.423,537.7221,409.1318,533.2045,405.7273,536.609,401.2096,528.2531,406.423" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="758.3701" y="267.0669">POST /Bookings/id/fulfillments</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="752.8701" y="282.1997">where all fulfillments are fulfilled</text><!--MD5=[e160308e1413fe67be64b131e06ddaec]
link confirmed to fulfilled--><path d="M441.1841,295.067 C451.5301,319.207 467.4691,356.397 478.4911,382.116 " fill="none" id="confirmed-to-fulfilled" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="480.4891,386.779,480.6223,376.931,478.5204,382.1829,473.2685,380.081,480.4891,386.779" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="475.3701" y="338.0669">PATCH /bookings/id/fulfillments</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="470.8701" y="353.1997">&lt;all fulfillments are now fulfilled&gt;</text><!--MD5=[1db40179f6a4d84b7f8f62d8a21617cb]
link confirmed to error--><path d="M383.4921,284.199 C370.6451,287.743 356.7331,291.548 343.8701,295 C292.8531,308.69 262.8341,284.546 228.8701,325 C215.9271,340.415 214.6431,363.341 216.3441,381.646 " fill="none" id="confirmed-to-error" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="216.8961,386.676,219.8899,377.2932,216.3504,381.7059,211.9377,378.1664,216.8961,386.676" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="229.8701" y="338.0669">unrecoverable error at fulfillment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="255.8701" y="353.1997">&lt;of a confirmed booking&gt;</text><!--MD5=[f393ce116f66033d46d211367829c82e]
link fulfilled to *end--><path d="M482.1831,437.056 C474.0441,456.3784 460.0841,482.8646 439.8701,499 C407.7971,524.602 358.4821,533.5876 333.8911,536.5883 " fill="none" id="fulfilled-to-*end" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="328.7541,537.1711,338.148,540.1298,333.7222,536.6068,337.2452,532.181,328.7541,537.1711" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="466.8701" y="487.5669">archiving</text><!--MD5=[68785ad7221959f2878ebc71627aad27]
link error to *end--><path d="M249.9271,435.829 C260.0731,444.895 271.1631,455.82 279.8701,467 C294.3111,485.5415 306.5171,510.1301 313.2521,524.9703 " fill="none" id="error-to-*end" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="315.3221,529.6066,315.3058,519.7578,313.2838,525.0409,308.0007,523.019,315.3221,529.6066" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="310.3701" y="480.0669">DELETE /booking</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="300.8701" y="495.1997">in a cleanup context</text><!--MD5=[68785ad7221959f2878ebc71627aad27]
link error to *end--><path d="M210.9481,437.031 C204.3091,455.5768 199.2871,481.0204 211.8701,499 C232.8441,528.9689 279.3861,535.9903 303.5871,537.5799 " fill="none" id="error-to-*end-1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="308.6741,537.8549,299.9032,533.3747,303.6814,537.5849,299.4712,541.3631,308.6741,537.8549" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="212.8701" y="487.5669">archiving</text><!--MD5=[3b66aa2cf12f9eb1d32b68b333e7b313]
@startuml
[*] - -> prebooked : POST /Bookings with OfferIds, Optional AccoIds, Optional ancillaries

prebooked - -> confirmed: POST /Bookings/id/fulfillments \n where at least 1 fulfillment is confirmed
prebooked - -> [*]: DELETE /Bookings/id
prebooked - -> [*]: ticket-time-limit reached
prebooked - -> error: unrecoverable error \nat confirmation/fulfillment
prebooked - -> fulfilled: POST /Bookings/id/fulfillments \n where all fulfillments are fulfilled
confirmed - -> fulfilled: PATCH /bookings/id/fulfillments \n <all fulfillments are now fulfilled>
confirmed - -> error: unrecoverable error at fulfillment \n <of a confirmed booking>
fulfilled - -> [*] : archiving
error - -> [*] : DELETE /booking \nin a cleanup context
error - -> [*] : archiving
@enduml

PlantUML version 1.2021.01(Tue Feb 02 07:55:08 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>