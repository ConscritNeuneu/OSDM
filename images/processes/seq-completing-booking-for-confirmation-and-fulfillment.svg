<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="608px" preserveAspectRatio="none" style="width:964px;height:608px;" version="1.1" viewBox="0 0 964 608" width="964px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rmjfgej0tmky" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1rmjfgej0tmky)" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="416" x="526" y="277.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="58" x2="58" y1="88.2969" y2="601.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="598" x2="598" y1="88.2969" y2="601.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="880" x2="880" y1="88.2969" y2="601.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="5" y="84.9951">API_Consumer</text><ellipse cx="58" cy="15" fill="#FEFECE" filter="url(#f1rmjfgej0tmky)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M58,23 L58,50 M45,31 L71,31 M58,50 L45,65 M58,50 L71,65 " fill="none" filter="url(#f1rmjfgej0tmky)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1rmjfgej0tmky)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="120" x="536" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="543" y="72.9951">OSDM_Provider</text><rect fill="#FEFECE" filter="url(#f1rmjfgej0tmky)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="100" x="828" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="835" y="72.9951">FareProvider</text><rect fill="#EEEEEE" filter="url(#f1rmjfgej0tmky)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="957" x="0" y="118.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="957" y1="118.8633" y2="118.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="957" y1="121.8633" y2="121.8633"/><rect fill="#EEEEEE" filter="url(#f1rmjfgej0tmky)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="933" x="12" y="108.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="914" x="18" y="124.3638">setting additional passenger information that may be required to confirm the booking, starting from the booking overview</text><polygon fill="#A80036" points="586,158.5625,596,162.5625,586,166.5625,590,162.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="58" x2="592" y1="162.5625" y2="162.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="504" x="65" y="157.4966">GET /Bookings/5678?embed="BOOKEDOFFERS,BOOKEDOFFERS.PASSENGERS"</text><polygon fill="#A80036" points="69,187.6953,59,191.6953,69,195.6953,65,191.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63" x2="597" y1="191.6953" y2="191.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="366" x="75" y="186.6294">&lt;Booking with booked offers and passengers resources&gt;</text><line style="stroke:#A80036;stroke-width:1.0;" x1="58" x2="100" y1="220.8281" y2="220.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="100" x2="100" y1="220.8281" y2="233.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59" x2="100" y1="233.8281" y2="233.8281"/><polygon fill="#A80036" points="69,229.8281,59,233.8281,69,237.8281,65,233.8281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="65" y="215.7622">check booking RequestedInformation</text><polygon fill="#A80036" points="586,258.9609,596,262.9609,586,266.9609,590,262.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="58" x2="592" y1="262.9609" y2="262.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="516" x="65" y="257.895">PATCH /Bookings/5678/passengers/123/ &lt; additional information for passenger&gt;</text><path d="M526,277.9609 L603,277.9609 L603,284.9609 L593,294.9609 L526,294.9609 L526,277.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="416" x="526" y="277.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="541" y="291.0278">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="231" x="618" y="290.1714">[for each offerPart in bookedOffers]</text><polygon fill="#A80036" points="868,312.2266,878,316.2266,868,320.2266,872,316.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="598" x2="874" y1="316.2266" y2="316.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="605" y="311.1606">update passenger data</text><polygon fill="#A80036" points="609,341.3594,599,345.3594,609,349.3594,605,345.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="603" x2="879" y1="345.3594" y2="345.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="615" y="340.2935">OK response (can vary per FareProvider)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="598" x2="640" y1="381.4922" y2="381.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="640" x2="640" y1="381.4922" y2="394.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="599" x2="640" y1="394.4922" y2="394.4922"/><polygon fill="#A80036" points="609,390.4922,599,394.4922,609,398.4922,605,394.4922" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="605" y="376.4263">update local booking</text><polygon fill="#A80036" points="69,419.625,59,423.625,69,427.625,65,423.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63" x2="597" y1="423.625" y2="423.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="321" x="75" y="418.5591">&lt;passenger updated with the added information&gt;</text><rect fill="#EEEEEE" filter="url(#f1rmjfgej0tmky)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="957" x="0" y="452.1914"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="957" y1="452.1914" y2="452.1914"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="957" y1="455.1914" y2="455.1914"/><rect fill="#EEEEEE" filter="url(#f1rmjfgej0tmky)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="309" x="324" y="441.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="290" x="330" y="457.6919">setting fulfillment type for the booking</text><polygon fill="#A80036" points="586,491.8906,596,495.8906,586,499.8906,590,495.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="58" x2="592" y1="495.8906" y2="495.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="65" y="490.8247">GET /Bookings/5678</text><polygon fill="#A80036" points="69,521.0234,59,525.0234,69,529.0234,65,525.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63" x2="597" y1="525.0234" y2="525.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="361" x="75" y="519.9575">&lt;Booking with only references to embedded resources&gt;</text><polygon fill="#A80036" points="586,550.1563,596,554.1563,586,558.1563,590,554.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="58" x2="592" y1="554.1563" y2="554.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="355" x="65" y="549.0903">PATCH /Bookings/5678 &lt;setting the fulfillmentOptions&gt;</text><polygon fill="#A80036" points="69,579.2891,59,583.2891,69,587.2891,65,583.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63" x2="597" y1="583.2891" y2="583.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="334" x="75" y="578.2231">&lt;Booking resource with updated fulfillmentOptions&gt;</text><!--MD5=[bbe3b85a859b5c625b1d9c0a47042f00]
@startuml
hide footbox

actor API_Consumer 

== setting additional passenger information that may be required to confirm the booking, starting from the booking overview ==
API_Consumer -> OSDM_Provider: GET /Bookings/5678?embed="BOOKEDOFFERS,BOOKEDOFFERS.PASSENGERS"
OSDM_Provider - -> API_Consumer: <Booking with booked offers and passengers resources>
API_Consumer -> API_Consumer: check booking RequestedInformation
API_Consumer -> OSDM_Provider: PATCH /Bookings/5678/passengers/123/ < additional information for passenger>
loop for each offerPart in bookedOffers
    OSDM_Provider -> FareProvider: update passenger data 
	FareProvider - -> OSDM_Provider : OK response (can vary per FareProvider)
end
OSDM_Provider -> OSDM_Provider : update local booking
OSDM_Provider - -> API_Consumer: <passenger updated with the added information>

== setting fulfillment type for the booking ==
API_Consumer -> OSDM_Provider: GET /Bookings/5678
OSDM_Provider - -> API_Consumer: <Booking with only references to embedded resources>
API_Consumer -> OSDM_Provider: PATCH /Bookings/5678 <setting the fulfillmentOptions>
OSDM_Provider - -> API_Consumer: <Booking resource with updated fulfillmentOptions>
@enduml

PlantUML version 1.2020.22(Sun Dec 06 10:36:27 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>