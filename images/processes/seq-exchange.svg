
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="838px" preserveAspectRatio="none" style="width:1107px;height:838px;" version="1.1" viewBox="0 0 1107 838" width="1107px" zoomAndPan="magnify"><defs><filter height="300%" id="f1lsypqbgusxmg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="59" x2="59" y1="88.2969" y2="831.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="944" x2="944" y1="88.2969" y2="831.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="5" y="84.9951">API_Consumer</text><ellipse cx="59" cy="15" fill="#FEFECE" filter="url(#f1lsypqbgusxmg)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M59,23 L59,50 M46,31 L72,31 M59,50 L46,65 M59,50 L72,65 " fill="none" filter="url(#f1lsypqbgusxmg)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1lsypqbgusxmg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="124" x="880" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="887" y="72.9951">OSDM_Provider</text><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1100" x="0" y="118.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="118.8633" y2="118.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="121.8633" y2="121.8633"/><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="419" x="340.5" y="108.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="400" x="346.5" y="124.3638">Requesting an exchange for the 2 known passengers</text><polygon fill="#A80036" points="932,158.5625,942,162.5625,932,166.5625,936,162.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59" x2="938" y1="162.5625" y2="162.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="712" x="66" y="157.4966">POST /Exchange-Trips-offers-collection &lt;MUNCHEN-PARIS, 25/10/2021, pax1, pax2, fulfilment1, fulfilment2, ...&gt;</text><polygon fill="#A80036" points="70,187.6953,60,191.6953,70,195.6953,66,191.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="943" y1="191.6953" y2="191.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="648" x="76" y="186.6294">&lt;Exchange-Trips-offers-Collection with list of references to ExchangetripOffers and scrolling tokens&gt;</text><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1100" x="0" y="220.2617"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="220.2617" y2="220.2617"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="223.2617" y2="223.2617"/><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="293" x="403.5" y="209.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="274" x="409.5" y="225.7622">Retrieving a specific exchange Offer</text><polygon fill="#A80036" points="932,259.9609,942,263.9609,932,267.9609,936,263.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59" x2="938" y1="263.9609" y2="263.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="483" x="66" y="258.895">GET /Exchange-Trips-offers/5678?embed="OFFERS, OFFERS.PASSENGERS "</text><polygon fill="#A80036" points="70,289.0938,60,293.0938,70,297.0938,66,293.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="943" y1="293.0938" y2="293.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="382" x="76" y="288.0278">&lt;Exchange-Trip-offer 5678 with its offers and passengers&gt;</text><polygon fill="#A80036" points="932,318.2266,942,322.2266,932,326.2266,936,322.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59" x2="938" y1="322.2266" y2="322.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="66" y="317.1606">GET /offers/4321?embed="OFFERS.OFFERPARTS"</text><polygon fill="#A80036" points="70,347.3594,60,351.3594,70,355.3594,66,351.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="943" y1="351.3594" y2="351.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="76" y="346.2935">&lt;offer 4321 with its offerparts&gt;</text><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1100" x="0" y="379.9258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="379.9258" y2="379.9258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="382.9258" y2="382.9258"/><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="434" x="333" y="369.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="420" x="339" y="385.4263">checking for additional required passenger information</text><line style="stroke:#A80036;stroke-width:1.0;" x1="59" x2="101" y1="423.625" y2="423.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="101" x2="101" y1="423.625" y2="436.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="60" x2="101" y1="436.625" y2="436.625"/><polygon fill="#A80036" points="70,432.625,60,436.625,70,440.625,66,436.625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="66" y="418.5591">check offer RequestedInformation</text><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1100" x="0" y="465.1914"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="465.1914" y2="465.1914"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="468.1914" y2="468.1914"/><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="673" x="213.5" y="454.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="654" x="219.5" y="470.6919">provisional exchange  including seat selection options and required additional pax info</text><polygon fill="#A80036" points="932,504.8906,942,508.8906,932,512.8906,936,508.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59" x2="938" y1="508.8906" y2="508.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="861" x="66" y="503.8247">PATCH /bookings/ &lt;exchangeOfferId= 4321, pax1 &lt;loyaltyCard&gt;, res1 &lt;window&gt;, embed = "EXCHANGEOPERATIONS, PASSENGERS &gt;</text><line style="stroke:#A80036;stroke-width:1.0;" x1="944" x2="986" y1="568.2891" y2="568.2891"/><line style="stroke:#A80036;stroke-width:1.0;" x1="986" x2="986" y1="568.2891" y2="581.2891"/><line style="stroke:#A80036;stroke-width:1.0;" x1="945" x2="986" y1="581.2891" y2="581.2891"/><polygon fill="#A80036" points="955,577.2891,945,581.2891,955,585.2891,951,581.2891" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="951" y="532.9575">create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="951" y="548.0903">exchangeOperation 1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="951" y="563.2231">in booking 5678</text><polygon fill="#A80036" points="70,606.4219,60,610.4219,70,614.4219,66,610.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="943" y1="610.4219" y2="610.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="631" x="76" y="605.356">&lt;Updated Booking 5678, now with a prebooked exchangeOperation 89, and updated passengers&gt;</text><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1100" x="0" y="638.9883"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="638.9883" y2="638.9883"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="641.9883" y2="641.9883"/><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="332" x="384" y="628.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="313" x="390" y="644.4888">setting fulfillment type for the exchange</text><polygon fill="#A80036" points="932,678.6875,942,682.6875,932,686.6875,936,682.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59" x2="938" y1="682.6875" y2="682.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="511" x="66" y="677.6216">PATCH /Bookings/5678/ExchangeOperations/89 &lt;setting the fulfillmentOptions&gt;</text><polygon fill="#A80036" points="70,707.8203,60,711.8203,70,715.8203,66,711.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="943" y1="711.8203" y2="711.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="431" x="76" y="706.7544">&lt;ExchangeOperation 89 resource with updated fulfillmentOptions&gt;</text><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1100" x="0" y="740.3867"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="740.3867" y2="740.3867"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1100" y1="743.3867" y2="743.3867"/><rect fill="#EEEEEE" filter="url(#f1lsypqbgusxmg)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="386" x="357" y="729.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="367" x="363" y="745.8872">confirming the exchange &amp; triggering fulfillment</text><polygon fill="#A80036" points="932,780.0859,942,784.0859,932,788.0859,936,784.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59" x2="938" y1="784.0859" y2="784.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="66" y="779.02">POST /Bookings/5678/Fulfillments</text><polygon fill="#A80036" points="70,809.2188,60,813.2188,70,817.2188,66,813.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="943" y1="813.2188" y2="813.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="76" y="808.1528">&lt;Fulfillments created in the booking 5678&gt;</text><!--MD5=[d01fa5c4df1ba04f8b96b9d0265b6399]
@startuml
hide footbox

actor API_Consumer 

== Requesting an exchange for the 2 known passengers ==
API_Consumer -> OSDM_Provider: POST /Exchange-Trips-offers-collection <MUNCHEN-PARIS, 25/10/2021, pax1, pax2, fulfilment1, fulfilment2, ...>
OSDM_Provider - -> API_Consumer: <Exchange-Trips-offers-Collection with list of references to ExchangetripOffers and scrolling tokens>

== Retrieving a specific exchange Offer ==
API_Consumer -> OSDM_Provider: GET /Exchange-Trips-offers/5678?embed="OFFERS, OFFERS.PASSENGERS "
OSDM_Provider - -> API_Consumer: <Exchange-Trip-offer 5678 with its offers and passengers>
API_Consumer -> OSDM_Provider: GET /offers/4321?embed="OFFERS.OFFERPARTS"
OSDM_Provider - -> API_Consumer: <offer 4321 with its offerparts>

==checking for additional required passenger information==
API_Consumer -> API_Consumer: check offer RequestedInformation 

== provisional exchange  including seat selection options and required additional pax info ==
API_Consumer -> OSDM_Provider: PATCH /bookings/ <exchangeOfferId= 4321, pax1 <loyaltyCard>, res1 <window>, embed = "EXCHANGEOPERATIONS, PASSENGERS >
OSDM_Provider -> OSDM_Provider : create \nexchangeOperation 1 \nin booking 5678
OSDM_Provider - -> API_Consumer: <Updated Booking 5678, now with a prebooked exchangeOperation 89, and updated passengers>

== setting fulfillment type for the exchange ==
API_Consumer -> OSDM_Provider: PATCH /Bookings/5678/ExchangeOperations/89 <setting the fulfillmentOptions>
OSDM_Provider - -> API_Consumer: <ExchangeOperation 89 resource with updated fulfillmentOptions>

== confirming the exchange & triggering fulfillment ==
API_Consumer -> OSDM_Provider: POST /Bookings/5678/Fulfillments
OSDM_Provider - -> API_Consumer: <Fulfillments created in the booking 5678>
@enduml

PlantUML version 1.2021.01beta6(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>