<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1221px" preserveAspectRatio="none" style="width:1470px;height:1221px;" version="1.1" viewBox="0 0 1470 1221" width="1470px" zoomAndPan="magnify"><defs><filter height="300%" id="f1j5k9s5ud6vmi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1j5k9s5ud6vmi)" height="90.3984" style="stroke:#000000;stroke-width:2.0;" width="261" x="570" y="235.8281"/><rect fill="#FFFFFF" filter="url(#f1j5k9s5ud6vmi)" height="59.2656" style="stroke:#000000;stroke-width:2.0;" width="241" x="580" y="259.9609"/><rect fill="#FFFFFF" filter="url(#f1j5k9s5ud6vmi)" height="117.5313" style="stroke:#000000;stroke-width:2.0;" width="873" x="580" y="382.3594"/><rect fill="#FFFFFF" filter="url(#f1j5k9s5ud6vmi)" height="90.3984" style="stroke:#000000;stroke-width:2.0;" width="261" x="570" y="745.9531"/><rect fill="#FFFFFF" filter="url(#f1j5k9s5ud6vmi)" height="59.2656" style="stroke:#000000;stroke-width:2.0;" width="241" x="580" y="770.0859"/><rect fill="#FFFFFF" filter="url(#f1j5k9s5ud6vmi)" height="117.5313" style="stroke:#000000;stroke-width:2.0;" width="873" x="580" y="892.4844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="58" x2="58" y1="88.2969" y2="1214.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="652" x2="652" y1="88.2969" y2="1214.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1211" x2="1211" y1="88.2969" y2="1214.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1337" x2="1337" y1="88.2969" y2="1214.8125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="5" y="84.9951">API_Consumer</text><ellipse cx="58" cy="15" fill="#FEFECE" filter="url(#f1j5k9s5ud6vmi)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M58,23 L58,50 M45,31 L71,31 M58,50 L45,65 M58,50 L71,65 " fill="none" filter="url(#f1j5k9s5ud6vmi)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1j5k9s5ud6vmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="120" x="590" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="597" y="72.9951">OSDM_Provider</text><rect fill="#FEFECE" filter="url(#f1j5k9s5ud6vmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="124" x="1147" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1154" y="72.9951">Journey_Planner</text><rect fill="#FEFECE" filter="url(#f1j5k9s5ud6vmi)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="100" x="1285" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1292" y="72.9951">FareProvider</text><rect fill="#EEEEEE" filter="url(#f1j5k9s5ud6vmi)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1463" x="0" y="118.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1463" y1="118.8633" y2="118.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1463" y1="121.8633" y2="121.8633"/><rect fill="#EEEEEE" filter="url(#f1j5k9s5ud6vmi)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="453" x="505" y="108.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="434" x="511" y="124.3638">Creating the trip collection &amp; getting the initial set of trips</text><polygon fill="#A80036" points="640,158.5625,650,162.5625,640,166.5625,644,162.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="58" x2="646" y1="162.5625" y2="162.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="489" x="65" y="157.4966">POST /Trips-offers-collection &lt;MUNCHEN-PARIS, 23/10/2021, 2 pax, dob, ...&gt;</text><polygon fill="#A80036" points="1199,187.6953,1209,191.6953,1199,195.6953,1203,191.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="652" x2="1205" y1="191.6953" y2="191.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="390" x="659" y="186.6294">&lt;retrieve trips information based on API Consumer request&gt;</text><polygon fill="#A80036" points="663,216.8281,653,220.8281,663,224.8281,659,220.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="657" x2="1210" y1="220.8281" y2="220.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="669" y="215.7622">&lt;trips information&gt;</text><path d="M570,235.8281 L647,235.8281 L647,242.8281 L637,252.8281 L570,252.8281 L570,235.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="90.3984" style="stroke:#000000;stroke-width:2.0;" width="261" x="570" y="235.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="585" y="248.895">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="662" y="248.0386">[for each trip]</text><path d="M580,259.9609 L657,259.9609 L657,266.9609 L647,276.9609 L580,276.9609 L580,259.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:2.0;" width="241" x="580" y="259.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="595" y="273.0278">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="672" y="272.1714">[for each segment]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="652" x2="694" y1="298.2266" y2="298.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="694" x2="694" y1="298.2266" y2="311.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="653" x2="694" y1="311.2266" y2="311.2266"/><polygon fill="#A80036" points="663,307.2266,653,311.2266,663,315.2266,659,311.2266" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="659" y="293.1606">determine FareProvider</text><line style="stroke:#A80036;stroke-width:1.0;" x1="652" x2="694" y1="354.3594" y2="354.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="694" x2="694" y1="354.3594" y2="367.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="653" x2="694" y1="367.3594" y2="367.3594"/><polygon fill="#A80036" points="663,363.3594,653,367.3594,663,371.3594,659,367.3594" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="659" y="349.2935">create offer requests</text><path d="M580,382.3594 L657,382.3594 L657,389.3594 L647,399.3594 L580,399.3594 L580,382.3594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="117.5313" style="stroke:#000000;stroke-width:2.0;" width="873" x="580" y="382.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="595" y="395.4263">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="672" y="394.5698">[for each request]</text><polygon fill="#A80036" points="1325,416.625,1335,420.625,1325,424.625,1329,420.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="652" x2="1331" y1="420.625" y2="420.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="659" y="415.5591">get offers</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1337" x2="1379" y1="449.7578" y2="449.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1379" x2="1379" y1="449.7578" y2="462.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1338" x2="1379" y1="462.7578" y2="462.7578"/><polygon fill="#A80036" points="1348,458.7578,1338,462.7578,1348,466.7578,1344,462.7578" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="1344" y="444.6919">calculate offers</text><polygon fill="#A80036" points="663,487.8906,653,491.8906,663,495.8906,659,491.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="657" x2="1336" y1="491.8906" y2="491.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="669" y="486.8247">request with trips</text><line style="stroke:#A80036;stroke-width:1.0;" x1="652" x2="694" y1="543.1563" y2="543.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="694" x2="694" y1="543.1563" y2="556.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="653" x2="694" y1="556.1563" y2="556.1563"/><polygon fill="#A80036" points="663,552.1563,653,556.1563,663,560.1563,659,556.1563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="659" y="522.9575">reconcile trips and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="659" y="538.0903">construct global offers</text><polygon fill="#A80036" points="69,581.2891,59,585.2891,69,589.2891,65,585.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63" x2="651" y1="585.2891" y2="585.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="419" x="75" y="580.2231">&lt;Trips-offers-Collection with list of TripOffer Refs scrolling tokens&gt;</text><rect fill="#EEEEEE" filter="url(#f1j5k9s5ud6vmi)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1463" x="0" y="613.8555"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1463" y1="613.8555" y2="613.8555"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1463" y1="616.8555" y2="616.8555"/><rect fill="#EEEEEE" filter="url(#f1j5k9s5ud6vmi)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="1199" x="132" y="603.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="1175" x="138" y="619.356">Scrolling to the (chronologically) next set of trips in the trip offer collection, returning trip offers, trips, offers and passengers, but no locations nor offerparts</text><polygon fill="#A80036" points="640,668.6875,650,672.6875,640,676.6875,644,672.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="58" x2="646" y1="672.6875" y2="672.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="446" x="65" y="652.4888">GET /Trips-offers-Collections/5678?scrollContext="#AEF34D26C345"&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="570" x="65" y="667.6216">embed="TRIPOFFERS, TRIPOFFERS.TRIPS,TRIPOFFERS.OFFERS, TRIPOFFERS.PASSENGERS"</text><polygon fill="#A80036" points="1199,697.8203,1209,701.8203,1199,705.8203,1203,701.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="652" x2="1205" y1="701.8203" y2="701.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="535" x="659" y="696.7544">&lt;retrieve next trips information based on scrollContext OR copmuted new params&gt;</text><polygon fill="#A80036" points="663,726.9531,653,730.9531,663,734.9531,659,730.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="657" x2="1210" y1="730.9531" y2="730.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="669" y="725.8872">&lt;trips information&gt;</text><path d="M570,745.9531 L647,745.9531 L647,752.9531 L637,762.9531 L570,762.9531 L570,745.9531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="90.3984" style="stroke:#000000;stroke-width:2.0;" width="261" x="570" y="745.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="585" y="759.02">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="662" y="758.1636">[for each trip]</text><path d="M580,770.0859 L657,770.0859 L657,777.0859 L647,787.0859 L580,787.0859 L580,770.0859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:2.0;" width="241" x="580" y="770.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="595" y="783.1528">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="672" y="782.2964">[for each segment]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="652" x2="694" y1="808.3516" y2="808.3516"/><line style="stroke:#A80036;stroke-width:1.0;" x1="694" x2="694" y1="808.3516" y2="821.3516"/><line style="stroke:#A80036;stroke-width:1.0;" x1="653" x2="694" y1="821.3516" y2="821.3516"/><polygon fill="#A80036" points="663,817.3516,653,821.3516,663,825.3516,659,821.3516" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="659" y="803.2856">determine FareProvider</text><line style="stroke:#A80036;stroke-width:1.0;" x1="652" x2="694" y1="864.4844" y2="864.4844"/><line style="stroke:#A80036;stroke-width:1.0;" x1="694" x2="694" y1="864.4844" y2="877.4844"/><line style="stroke:#A80036;stroke-width:1.0;" x1="653" x2="694" y1="877.4844" y2="877.4844"/><polygon fill="#A80036" points="663,873.4844,653,877.4844,663,881.4844,659,877.4844" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="659" y="859.4185">create offer requests</text><path d="M580,892.4844 L657,892.4844 L657,899.4844 L647,909.4844 L580,909.4844 L580,892.4844 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="117.5313" style="stroke:#000000;stroke-width:2.0;" width="873" x="580" y="892.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="595" y="905.5513">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="672" y="904.6948">[for each request]</text><polygon fill="#A80036" points="1325,926.75,1335,930.75,1325,934.75,1329,930.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="652" x2="1331" y1="930.75" y2="930.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="659" y="925.6841">get offers</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1337" x2="1379" y1="959.8828" y2="959.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1379" x2="1379" y1="959.8828" y2="972.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1338" x2="1379" y1="972.8828" y2="972.8828"/><polygon fill="#A80036" points="1348,968.8828,1338,972.8828,1348,976.8828,1344,972.8828" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="1344" y="954.8169">calculate offers</text><polygon fill="#A80036" points="663,998.0156,653,1002.0156,663,1006.0156,659,1002.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="657" x2="1336" y1="1002.0156" y2="1002.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="669" y="996.9497">response with offers</text><line style="stroke:#A80036;stroke-width:1.0;" x1="652" x2="694" y1="1053.2813" y2="1053.2813"/><line style="stroke:#A80036;stroke-width:1.0;" x1="694" x2="694" y1="1053.2813" y2="1066.2813"/><line style="stroke:#A80036;stroke-width:1.0;" x1="653" x2="694" y1="1066.2813" y2="1066.2813"/><polygon fill="#A80036" points="663,1062.2813,653,1066.2813,663,1070.2813,659,1066.2813" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="659" y="1033.0825">reconcile trips and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="659" y="1048.2153">construct global offers</text><polygon fill="#A80036" points="69,1091.4141,59,1095.4141,69,1099.4141,65,1095.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63" x2="651" y1="1095.4141" y2="1095.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="558" x="75" y="1090.3481">&lt;Trip-offers-Collection with list of Trip resources, offers, passengers &amp; scrolling tokens&gt;</text><rect fill="#EEEEEE" filter="url(#f1j5k9s5ud6vmi)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1463" x="0" y="1123.9805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1463" y1="1123.9805" y2="1123.9805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1463" y1="1126.9805" y2="1126.9805"/><rect fill="#EEEEEE" filter="url(#f1j5k9s5ud6vmi)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="582" x="440.5" y="1113.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="563" x="446.5" y="1129.481">Retrieving the details of one offer, with full details of all included resources</text><polygon fill="#A80036" points="640,1163.6797,650,1167.6797,640,1171.6797,644,1167.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="58" x2="646" y1="1167.6797" y2="1167.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="65" y="1162.6138">GET /Offers/3456?embed="ALL"</text><polygon fill="#A80036" points="69,1192.8125,59,1196.8125,69,1200.8125,65,1196.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63" x2="651" y1="1196.8125" y2="1196.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="75" y="1191.7466">&lt;Offer 3456&gt;</text><!--MD5=[97ee9a304e7b025a0b0e73a8eac4a651]
@startuml
hide footbox
actor API_Consumer 

== Creating the trip collection & getting the initial set of trips ==
API_Consumer -> OSDM_Provider: POST /Trips-offers-collection <MUNCHEN-PARIS, 23/10/2021, 2 pax, dob, ...>
OSDM_Provider -> Journey_Planner : <retrieve trips information based on API Consumer request>
Journey_Planner - -> OSDM_Provider : <trips information>
loop for each trip    
    loop for each segment
        OSDM_Provider -> OSDM_Provider: determine FareProvider
    end
end
OSDM_Provider -> OSDM_Provider : create offer requests
loop for each request
    OSDM_Provider -> FareProvider: get offers 
    FareProvider -> FareProvider: calculate offers
    FareProvider - -> OSDM_Provider : request with trips
end
OSDM_Provider -> OSDM_Provider : reconcile trips and \nconstruct global offers
OSDM_Provider - -> API_Consumer: <Trips-offers-Collection with list of TripOffer Refs scrolling tokens>

== Scrolling to the (chronologically) next set of trips in the trip offer collection, returning trip offers, trips, offers and passengers, but no locations nor offerparts  ==
API_Consumer -> OSDM_Provider: GET /Trips-offers-Collections/5678?scrollContext="#AEF34D26C345"&\nembed="TRIPOFFERS, TRIPOFFERS.TRIPS,TRIPOFFERS.OFFERS, TRIPOFFERS.PASSENGERS"
OSDM_Provider -> Journey_Planner : <retrieve next trips information based on scrollContext OR copmuted new params>
Journey_Planner - -> OSDM_Provider : <trips information>
loop for each trip    
    loop for each segment
        OSDM_Provider -> OSDM_Provider: determine FareProvider
    end
end
OSDM_Provider -> OSDM_Provider : create offer requests
loop for each request
    OSDM_Provider -> FareProvider: get offers 
    FareProvider -> FareProvider: calculate offers
    FareProvider - -> OSDM_Provider : response with offers
end
OSDM_Provider -> OSDM_Provider : reconcile trips and \nconstruct global offers
OSDM_Provider - -> API_Consumer: <Trip-offers-Collection with list of Trip resources, offers, passengers & scrolling tokens>

== Retrieving the details of one offer, with full details of all included resources ==
API_Consumer -> OSDM_Provider: GET /Offers/3456?embed="ALL"
OSDM_Provider - -> API_Consumer: <Offer 3456>
@enduml

PlantUML version 1.2020.22(Sun Dec 06 10:36:27 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>